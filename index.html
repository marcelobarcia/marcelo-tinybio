<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Marcelo Barcia — Tinybio</title>
  <style>
    body{font-family:Inter,Arial,Helvetica,sans-serif;margin:0;padding:20px;background:#0f1720;color:#e6eef8}
    .card{background:#0b1220;padding:16px;border-radius:10px;margin-bottom:12px}
    .grid{display:grid;grid-template-columns:2fr 1fr;gap:12px}
    .avatar{width:72px;height:72px;border-radius:50%;background:#334155}
    a.button{display:inline-block;padding:8px 12px;background:#2563eb;color:white;border-radius:8px;text-decoration:none}
    h1{margin:0 0 8px 0}
    .meta{color:#94a3b8}
  </style>
</head>
<body>
  <div class="grid">
    <div>
      <div class="card">
        <div style="display:flex;align-items:center;gap:12px">
          <div class="avatar"></div>
          <div>
            <h1>Marcelo Barcia</h1>
            <div class="meta">Founder @ Ataway — Product, Ops, AI</div>
            <div style="margin-top:8px"><a class="button" href="https://linkedin.com/in/marcelobarcia">LinkedIn</a> <a class="button" href="https://trello.com/b/6985ccd715f8a39762a2751c">Trello</a></div>
          </div>
        </div>
      </div>
      <div class="card" id="cards">
        <h3>Últimas tarjetas</h3>
        <div id="cards-list">Cargando...<div id="debug-cards-count" style="margin-top:8px;color:#6b7280"></div></div>
      </div>
</div>
      </div>
    </div>
    <div>
      <div class="card" id="digest">
        <h3>Digest</h3>
        <div id="digest-list">Cargando...<div id="debug-digest-count" style="margin-top:8px;color:#6b7280"></div></div>
      </div>
</div>
      </div>
    </div>
  </div>
  <script>
(function(){
  function safeText(t){return document.createTextNode(t);} 
  function formatDate(iso){try{var d=new Date(iso);return d.toLocaleString('es-ES',{day:'2-digit',month:'short',year:'numeric',hour:'2-digit',minute:'2-digit'});}catch(e){return iso}}
  fetch('data.json').then(function(r){return r.json();}).then(function(d){
    var cards=d.cards||[];var digest=d.digest||[];
    var cardsList=document.getElementById('cards-list');cardsList.innerHTML='';
    if(cards.length===0){cardsList.appendChild(safeText('Sin tarjetas'));}
    else{cards.forEach(function(c){var div=document.createElement('div');div.style.padding='8px';div.style.borderBottom='1px solid #0f2433';
        var a=document.createElement('a');a.style.color='#fff';a.style.fontWeight='600';a.href=c.url||'#';a.target='_blank';a.appendChild(safeText(c.name));div.appendChild(a);
        var meta=document.createElement('div');meta.className='meta';meta.appendChild(safeText((c.list||'')+' — '+formatDate(c.date||'') ));div.appendChild(meta);
        cardsList.appendChild(div);
    });}
    var digestList=document.getElementById('digest-list');digestList.innerHTML='';
    if(digest.length===0){digestList.appendChild(safeText('Sin noticias'));} else {digest.forEach(function(n){var div=document.createElement('div');div.style.padding='6px';div.style.borderBottom='1px solid #0f2433';var a=document.createElement('a');a.style.color='#9bd';a.href=n.url||'#';a.target='_blank';a.appendChild(safeText(n.title));div.appendChild(a);digestList.appendChild(div);});}
    try{document.getElementById('debug-cards-count').innerText='Total tarjetas: '+(cards.length||0);}catch(e){}
    try{document.getElementById('debug-digest-count').innerText='Total noticias: '+(digest.length||0);}catch(e){}
  }).catch(function(e){console.error('fetch error',e);document.getElementById('cards-list').innerText='Error cargando';document.getElementById('digest-list').innerText='Error cargando';});
})();
</script>
    // fetch static data.json generated by the nightly job
    fetch('data.json').then(r=>r.json()).then(d=>{
      const cards=d.cards||[];
      const digest=d.digest||[];
      const cardsList=document.getElementById('cards-list');
      cardsList.innerHTML=cards.map(c=>`<div style="padding:8px;border-bottom:1px solid #0f2433"><strong>${c.name}</strong><div class="meta">${c.list} — ${c.date}</div></div>`).join('')||'<i>Sin tarjetas</i>';
      const digestList=document.getElementById('digest-list');
      digestList.innerHTML=digest.map(n=>`<div style="padding:6px;border-bottom:1px solid #0f2433"><a href="${n.url}" style="color:#9bd">${n.title}</a></div>`).join('')||'<i>Sin noticias</i>';
    }).then(()=>{ try{document.getElementById('debug-cards-count').innerText='Total tarjetas: '+(cards.length||0);document.getElementById('debug-digest-count').innerText='Total noticias: '+(digest.length||0);}catch(e){ } }).catch(e=>{console.error(e)});
  </script>
</body>
</html>
